<html>
<head>
  <title>getUsername test interface</title>
  <script src="/portal/jquery/jquery-3.1.1.min.js"></script>
</head>

<body>
  <p>Enter a Drupal session ID and the configuration keyword that corresponds with the
    Drupal instance, then click submit.  The getUsername service response should be
    displayed in JSON format below.</p>
    <p>
      <form>
        <table border=0>
          <tr><td align="right">Session ID:</td><td><input type="text" size="50" id="session_id" value=""></td></tr>
          <tr><td align="right">Configuration Keyword:</td><td><input type="text" size="50" id="config_kw" value="nknportal"></td></tr>
          <tr><td></td><td align="right"><input id="execute" type="button" value="Submit"></td></tr>
          <tr><td colspan="2"><hr id="status" /></td></tr>
          <tr><td colspan="2"><pre><div id="result" /></pre></td></tr>
        </table>
      </form>
    </p>
  </body>

  <script type="text/javascript">
  (function ($) {
    $("#execute").click(function(){
      $.post( "/getUsername/", { session_id: $('#session_id').val(),
      config_kw:  $('#config_kw').val() })
      .done(function( data ) {
        $('#result').html(JSON.stringify(data, null, 2));
        if (data.error) {$('#status').css("border", "1px solid #f00");}
        else {$('#status').css("border", "1px solid #0da");}
      });
    });
  })(jQuery);
  </script>
</html>
